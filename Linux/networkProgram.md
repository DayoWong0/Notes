# 网络编程第 3 章

## 目标

写一个带有过滤功能的 http 代理

## 公共函数

### htonl 和 htos

地址转化?, 常见参数为 INADDR_ANY

## TCP 套接字函数

这部分内容需要自己去仔细看下, 看函数和参数代表的意思

### close

申请关闭, 传输完成再关闭

### shutdown

强制关, 可以分别关闭 read 和 write 边的

### read

### send

### recv

## TCP 套接字编程

上面的函数的组合使用

cmd 命令 列出 exe 结尾的文件 命令

dir \*.exe

## UDP 套接字编程

### UDP 函数

#### sendto

指明发送到的服务器的地址

#### recvfrom

指明数据包来源地址

#### connect

tcp 中这个函数用于三次握手

udp 中可以用来记录通信双方的 ip: port 信息

### 与 TCP 的区别

UDP 不建立连接, 只能先客户端发数据

## 网络编程第 5 章 并发服务器

### 创建进程

#### fork 函数

父进程执行 fork 函数后, 父进程继续执行后面的代码, 父进程返回子进程 pid, 子进程返回 0 进程创建成功, -1 表示出错

子进程执行 fork 后的代码.

此代码会创建几个进程

```c
int main(){
    fork();
    fork();
}
```

三个进程

父进程

    	1  2		1

8. IO
   8.1 IO 复用
   8.1.1 select 函数
9. 广播与多播放
   9.1 广播的实现
   广播只能用 UDP, 向多个主机发送信息

函数 中设置 SO_BROADCAST 参数

## 8. IO

### 8.1 IO 复用

#### 8.1.1 select 函数

## 9. 广播与多播 (了解即可)

### 9.1 广播的实现

广播只能用 UDP, 向多个主机发送信息

函数 中设置 SO_BROADCAST 参数

## 13. 章

### 13.1 原始套接字 与数据链路的访问编程

需要了解 IPV4 数据包.

### dos 攻击

客户发起很多连接, 服务器开很多进程或者线程, 三次握手的第三次不发送, 让服务器一直处于 阻塞状态.

正常 TCP 做不到, 原始套接字可以.

用户可以将数据包里的 来源 IP 地址任意修改, IP 地址伪造, 刚好我暑假也使用过.

### 权限

原始套接字很危险, 可以监听本地的任何应用的数据, 要 root 权限.

Nvidia 的游戏串流, frp 就是这样实现的吗?

打算后面去看一看 frp 的源码.

### 13.2 数据链路访问

网络通信像流水一样, 都能访问, 不过一般设备只接受发给自己的, 否则丢弃.

这可能造成窃听.

### 13.3 以太网的广播通信

以太网中, 所有通信都是广播的.

#### tcpdump 命令

监听网卡

```shell
tvpdump -i 网卡号
```

### libpcap

Github 上找
