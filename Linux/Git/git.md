# Git- 分布式版本控制

## 参考资源

[【狂神说 Java】Git 最新教程通俗易懂](https://www.bilibili.com/video/BV1FE411P7B3?from=search&seid=5284427772569702087)

[廖雪峰 Git 教程](https://www.liaoxuefeng.com/wiki/896043488029600)

[Git 官方中文文档](https://git-scm.com/book/zh/v2)

# 廖雪峰 Git 教程

## git 特点

1.  分布式

## git 历史

Linus 两周开发出 Git

## git 命令

### 基本命令

git init

初始化版本仓库

```sh
git add <filename>
```

```sh
git commit -m <修改信息>
```

```sh
git log
```

版本信息

### 版本回退

- 回退到上一个版本

```shell
git reset --hard HEAD^
```

- Git 提供了一个命令

  git reflog

  用来记录你的每一次命令

### [文件回退](https://www.liaoxuefeng.com/wiki/896043488029600/897889638509536)

场景 1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令`git checkout -- file`。

场景 2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令`git reset HEAD <file>`，就回到了场景 1，第二步按场景 1 操作。

场景 3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考[版本回退](https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192)一节，不过前提是没有推送到远程库。

## Git 分支

因为创建、合并和删除分支非常快，所以 Git 鼓励你使用分支完成某个任务，合并后再删掉分支，这和直接在`master`分支上工作效果是一样的，但过程更安全。

### 解决冲突

### [分支管理策略](https://www.liaoxuefeng.com/wiki/896043488029600/900005860592480)

通常，合并分支时，如果可能，Git 会用`Fast forward`模式，但这种模式下，删除分支后，会丢掉分支信息。

如果要强制禁用`Fast forward`模式，Git 就会在 merge 时生成一个新的 commit，这样，从分支历史上就可以看出分支信息。

下面我们实战一下`--no-ff`方式的`git merge`

### 分支策略

在实际开发中，我们应该按照几个基本原则进行分支管理：

首先，`master`分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；

那在哪干活呢？干活都在`dev`分支上，也就是说，`dev`分支是不稳定的，到某个时候，比如 1.0 版本发布时，再把`dev`分支合并到`master`上，在`master`分支发布 1.0 版本；

你和你的小伙伴们每个人都在`dev`分支上干活，每个人都有自己的分支，时不时地往`dev`分支上合并就可以了。

所以，团队合作的分支看起来就像这样：

![](git.assets/0.png)

### 小结

Git 分支十分强大，在团队开发中应该充分应用。

合并分支时，加上`--no-ff`参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而`fast forward`合并就看不出来曾经做过合并。

# 【狂神说 Java】Git 最新教程通俗易懂
